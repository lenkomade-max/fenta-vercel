# 09 - AI Agent System (Multi-Agent Orchestration)

> **Ğ¯Ğ”Ğ Ğ ĞŸĞ ĞĞ”Ğ£ĞšĞ¢Ğ.** ĞœÑƒĞ»ÑŒÑ‚Ğ¸-Ğ°Ğ³ĞµĞ½Ñ‚Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ñ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¼Ğ¸ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ°Ğ¼Ğ¸, RAG, Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ·Ğ°Ñ‚Ñ€Ğ°Ñ‚ Ğ¸ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚-Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ¾Ğ¼.

---

# ğŸ¯ ĞœĞ˜ĞĞ˜ĞœĞĞ›Ğ¬ĞĞĞ¯ Ğ ĞĞ‘ĞĞ§ĞĞ¯ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ (MVP)

## ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ñ‹

```
1. ĞÑ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€ â€” ÑÑ‚Ğ¾ ĞĞ• Ğ¾Ğ´Ğ¸Ğ½ Ğ°Ğ³ĞµĞ½Ñ‚, Ğ° Ğ“Ğ Ğ£ĞŸĞŸĞ ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²
2. ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ°Ğ³ĞµĞ½Ñ‚ â€” ÑƒĞ·ĞºĞ¸Ğ¹ ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸ÑÑ‚ (Ğ¾Ğ´Ğ½Ğ° Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ° = Ğ¾Ğ´Ğ¸Ğ½ Ğ°Ğ³ĞµĞ½Ñ‚)
3. ĞĞ³ĞµĞ½Ñ‚Ñ‹ ÑĞºĞ¾Ğ½Ğ¾Ğ¼ÑÑ‚ Ñ‚Ğ¾ĞºĞµĞ½Ñ‹ Ğ·Ğ° ÑÑ‡Ñ‘Ñ‚ RAG (Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· Ğ±Ğ°Ğ·, Ğ½Ğµ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ)
4. Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ÑĞ°Ğ¼Ğ¾Ğ¾Ğ±ÑƒÑ‡Ğ°ĞµÑ‚ÑÑ (Ğ½ĞµÑ‚ Ğ² Ğ±Ğ°Ğ·Ğµ â†’ Ğ¿Ğ¾Ğ¸ÑĞº â†’ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ² Ğ±Ğ°Ğ·Ñƒ)
```

---

## ğŸ“Š 10 Ğ‘ĞĞ— Ğ”ĞĞĞĞ«Ğ¥ (RAG)

| # | Ğ‘Ğ°Ğ·Ğ° | Ğ§Ñ‚Ğ¾ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ | Ğ”Ğ»Ñ ĞºĞ¾Ğ³Ğ¾ |
|---|------|------------|----------|
| 1 | **hooks** | 500+ Ğ²Ğ¸Ñ€ÑƒÑĞ½Ñ‹Ñ… Ñ…ÑƒĞºĞ¾Ğ² Ğ¿Ğ¾ Ğ¶Ğ°Ğ½Ñ€Ğ°Ğ¼ | Script Agent |
| 2 | **scripts** | 300+ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ¾Ğ² ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸ĞµĞ² | Script Agent |
| 3 | **structures** | 30 Ğ¶Ğ°Ğ½Ñ€Ğ¾Ğ² = 30 ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€ (Hookâ†’Twistâ†’Reveal) | Orchestrator |
| 4 | **video_prompts** | 200+ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ² Sora/Kling/Runway | Video Prompt Agent |
| 5 | **cinematography** | ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° ĞºĞ°Ğ¼ĞµÑ€Ñ‹, ÑĞ²ĞµÑ‚Ğ°, Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾ Ğ¶Ğ°Ğ½Ñ€Ğ°Ğ¼ | Video Prompt Agent |
| 6 | **styles** | Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑ‚Ğ¸Ğ»Ğ¸ (dark, vibrant, minimal...) | Video + Image Agents |
| 7 | **music_moods** | Ğ–Ğ°Ğ½Ñ€ â†’ BPM, Ñ‚Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ, Suno Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ | Music Agent |
| 8 | **voice_profiles** | Ğ“Ğ¾Ğ»Ğ¾ÑĞ° ElevenLabs, Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸, Ñ‚Ğ¾Ğ½Ğ° | Voice Agent |
| 9 | **platform_rules** | ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° TikTok/Reels/Shorts/YouTube | All Agents |
| 10 | **user_custom** | ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğµ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹ Ğ¸ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹ | All Agents |

**Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¿Ğ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ:**
```
Ğ–Ğ°Ğ½Ñ€ "Crypto News" â†’ Ğ½ĞµÑ‚ Ğ² Ğ±Ğ°Ğ·Ğµ hooks
      â†“
Research Agent Ğ¸Ñ‰ĞµÑ‚: "crypto viral hooks examples"
      â†“
Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ 10 Ñ…ÑƒĞºĞ¾Ğ² Ğ² Ğ±Ğ°Ğ·Ñƒ hooks (metadata: genre="crypto")
      â†“
Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ â€” ÑƒĞ¶Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ğ¸Ğ· Ğ±Ğ°Ğ·Ñ‹
```

---

## ğŸ¤– 20 ĞĞ“Ğ•ĞĞ¢ĞĞ’ (ÑĞ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹)

### ĞĞ ĞšĞ•Ğ¡Ğ¢Ğ ĞĞ¢ĞĞ  (Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ° Ğ¸Ğ· 5 Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ORCHESTRATOR GROUP                           â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   INTENT    â”‚  â”‚   WORKFLOW  â”‚  â”‚   BUDGET    â”‚             â”‚
â”‚  â”‚   AGENT     â”‚  â”‚   BUILDER   â”‚  â”‚   AGENT     â”‚             â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚             â”‚
â”‚  â”‚ ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚    â”‚  â”‚ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚     â”‚  â”‚ Ğ¡Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚     â”‚             â”‚
â”‚  â”‚ Ñ‡Ñ‚Ğ¾ Ñ…Ğ¾Ñ‡ĞµÑ‚   â”‚  â”‚ workflow    â”‚  â”‚ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ,  â”‚             â”‚
â”‚  â”‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒâ”‚  â”‚ Ğ¸Ğ· Ğ½Ğ¾Ğ´      â”‚  â”‚ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚   CONTEXT   â”‚  â”‚   ROUTER    â”‚                              â”‚
â”‚  â”‚   AGENT     â”‚  â”‚   AGENT     â”‚                              â”‚
â”‚  â”‚             â”‚  â”‚             â”‚                              â”‚
â”‚  â”‚ Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚    â”‚  â”‚ Ğ ĞµÑˆĞ°ĞµÑ‚      â”‚                              â”‚
â”‚  â”‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ·   â”‚  â”‚ ĞºĞ°ĞºĞ¾Ğ¹ Ğ°Ğ³ĞµĞ½Ñ‚ â”‚                              â”‚
â”‚  â”‚ RAG Ğ±Ğ°Ğ·     â”‚  â”‚ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹   â”‚                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| # | ĞĞ³ĞµĞ½Ñ‚ | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞœĞ¾Ğ´ĞµĞ»ÑŒ |
|---|-------|--------|--------|
| 1 | **Intent Agent** | ĞŸĞ¾Ğ½ÑÑ‚ÑŒ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ: Ğ¶Ğ°Ğ½Ñ€, Ñ‚ĞµĞ¼Ğ°, Ğ´Ğ»Ğ¸Ğ½Ğ°, ÑÑ‚Ğ¸Ğ»ÑŒ | GPT-5 Nano |
| 2 | **Workflow Builder** | Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ´Ñ‹ Ğ² workflow | GPT-5 Nano |
| 3 | **Budget Agent** | Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ, Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ÑŒ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ | GPT-5 Nano |
| 4 | **Context Agent** | Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ€ĞµĞ»ĞµĞ²Ğ°Ğ½Ñ‚Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· Ğ²ÑĞµÑ… Ğ±Ğ°Ğ· | â€” (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ RAG) |
| 5 | **Router Agent** | Ğ ĞµÑˆĞ¸Ñ‚ÑŒ ĞºĞ°ĞºĞ¾Ğ¹ Ğ°Ğ³ĞµĞ½Ñ‚ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑˆĞ°Ğ³ | GPT-5 Nano |

---

### ĞšĞĞĞ¢Ğ•ĞĞ¢ ĞĞ“Ğ•ĞĞ¢Ğ« (Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ° Ğ¸Ğ· 6 Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²)

| # | ĞĞ³ĞµĞ½Ñ‚ | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ±Ğ°Ğ·Ñ‹ | ĞœĞ¾Ğ´ĞµĞ»ÑŒ |
|---|-------|--------|--------------|--------|
| 6 | **Script Agent** | ĞŸĞ¸ÑˆĞµÑ‚ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ | hooks, scripts, structures | DeepSeek V3.2 |
| 7 | **Hook Agent** | Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ‚ 5 Ğ²Ğ°Ñ€Ğ¸Ğ°Ğ½Ñ‚Ğ¾Ğ² Ñ…ÑƒĞºĞ° | hooks | GPT-5 Mini |
| 8 | **Segment Agent** | Ğ Ğ°Ğ·Ğ±Ğ¸Ğ²Ğ°ĞµÑ‚ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ Ğ½Ğ° ÑĞµĞ³Ğ¼ĞµĞ½Ñ‚Ñ‹ | structures | GPT-5 Nano |
| 9 | **CTA Agent** | ĞŸĞ¸ÑˆĞµÑ‚ Ğ¿Ñ€Ğ¸Ğ·Ñ‹Ğ² Ğº Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ | platform_rules | GPT-5 Nano |
| 10 | **Rewrite Agent** | Ğ£Ğ»ÑƒÑ‡ÑˆĞ°ĞµÑ‚ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ ĞµÑĞ»Ğ¸ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ½Ğ¸Ğ·ĞºĞ¾Ğµ | scripts | DeepSeek V3.2 |
| 11 | **Translate Agent** | ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ğ¾Ğ´ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ ÑĞ·Ñ‹ĞºĞ¸ | â€” | GPT-5 Mini |

---

### Ğ’Ğ˜Ğ—Ğ£ĞĞ›Ğ¬ĞĞ«Ğ• ĞĞ“Ğ•ĞĞ¢Ğ« (Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ° Ğ¸Ğ· 4 Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²)

| # | ĞĞ³ĞµĞ½Ñ‚ | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ±Ğ°Ğ·Ñ‹ | ĞœĞ¾Ğ´ĞµĞ»ÑŒ |
|---|-------|--------|--------------|--------|
| 12 | **Video Prompt Agent** | ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ Ğ´Ğ»Ñ Sora/Kling/Runway | video_prompts, cinematography | DeepSeek V3.2 |
| 13 | **Image Prompt Agent** | ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ Ğ´Ğ»Ñ Midjourney/Flux | styles | GPT-5 Mini |
| 14 | **Style Agent** | Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ Ğ¿Ğ¾Ğ´ Ğ¶Ğ°Ğ½Ñ€ | styles | GPT-5 Nano |
| 15 | **Thumbnail Agent** | Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ‚ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ²ÑŒÑ | styles, hooks | GPT-5 Mini |

---

### ĞĞ£Ğ”Ğ˜Ğ ĞĞ“Ğ•ĞĞ¢Ğ« (Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ° Ğ¸Ğ· 3 Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²)

| # | ĞĞ³ĞµĞ½Ñ‚ | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | Ğ’Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ±Ğ°Ğ·Ñ‹ | ĞœĞ¾Ğ´ĞµĞ»ÑŒ |
|---|-------|--------|--------------|--------|
| 16 | **Voice Agent** | Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ³Ğ¾Ğ»Ğ¾Ñ Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ TTS | voice_profiles | GPT-5 Nano |
| 17 | **Music Agent** | Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ‚ Suno Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ | music_moods | GPT-5 Nano |
| 18 | **SFX Agent** | ĞŸĞ¾Ğ´Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ·Ğ²ÑƒĞºĞ¾Ğ²Ñ‹Ğµ ÑÑ„Ñ„ĞµĞºÑ‚Ñ‹ | â€” | GPT-5 Nano |

---

### Ğ¡Ğ›Ğ£Ğ–Ğ•Ğ‘ĞĞ«Ğ• ĞĞ“Ğ•ĞĞ¢Ğ« (Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ° Ğ¸Ğ· 2 Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²)

| # | ĞĞ³ĞµĞ½Ñ‚ | Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° | ĞœĞ¾Ğ´ĞµĞ»ÑŒ |
|---|-------|--------|--------|
| 19 | **Research Agent** | ĞŸĞ¾Ğ¸ÑĞº Ğ² Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğµ (Tavily/Perplexity) | GPT-5 Mini |
| 20 | **Quality Agent** | ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾, Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ retry | GPT-5 Mini |

---

## ğŸ” 2 ĞŸĞĞ˜Ğ¡ĞšĞĞ’Ğ˜ĞšĞ

| Ğ¡ĞµÑ€Ğ²Ğ¸Ñ | Ğ¦ĞµĞ½Ğ° | Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ | ĞšĞ¾Ğ³Ğ´Ğ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ |
|--------|------|----------|-------------------|
| **Perplexity Sonar** | $0.005/Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ | 400ms | Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ñ„Ğ°ĞºÑ‚Ñ‹, Ğ²ĞµÑ€Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ |
| **Tavily** | $0.008/Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ | 2 ÑĞµĞº | Ğ“Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº, ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ† |

---

## ğŸ’° 3 Ğ£Ğ ĞĞ’ĞĞ¯ ĞœĞĞ”Ğ•Ğ›Ğ•Ğ™

| Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ | ĞœĞ¾Ğ´ĞµĞ»Ğ¸ | Ğ¦ĞµĞ½Ğ° (input/1M) | ĞšĞ¾Ğ³Ğ´Ğ° |
|---------|--------|-----------------|-------|
| **Ğ”ĞµÑˆÑ‘Ğ²Ñ‹Ğ¹** | GPT-5 Nano, DeepSeek R1 | $0.02-0.05 | Routing, ĞºĞ»Ğ°ÑÑĞ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ, Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ |
| **Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹** | DeepSeek V3.2, GPT-5 Mini | $0.25-0.27 | Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸, Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹, Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· |
| **Ğ”Ğ¾Ñ€Ğ¾Ğ³Ğ¾Ğ¹** | GPT-5.1, Gemini 3 Pro | $1.25-2.00 | Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ review, ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ğµ ĞºĞµĞ¹ÑÑ‹ |

---

## ğŸ”„ ĞšĞĞš Ğ­Ğ¢Ğ Ğ ĞĞ‘ĞĞ¢ĞĞ•Ğ¢ (Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€)

```
ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¬: "Ğ¡Ğ´ĞµĞ»Ğ°Ğ¹ True Crime Ğ¿Ñ€Ğ¾ Ğ¸ÑÑ‡ĞµĞ·Ğ½Ğ¾Ğ²ĞµĞ½Ğ¸Ğµ CEO, 60 ÑĞµĞº, Ğ´Ğ»Ñ TikTok"

Ğ¨ĞĞ“Ğ˜:

1. INTENT AGENT
   â†’ ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚: Ğ¶Ğ°Ğ½Ñ€=true-crime, Ñ‚ĞµĞ¼Ğ°=CEO disappearance, Ğ´Ğ»Ğ¸Ğ½Ğ°=60s, Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°=TikTok
   â†’ ĞœĞ¾Ğ´ĞµĞ»ÑŒ: GPT-5 Nano (0.001Â¢)

2. CONTEXT AGENT
   â†’ Ğ˜Ğ´Ñ‘Ñ‚ Ğ² RAG: hooks(true-crime), structures(true-crime), platform_rules(tiktok)
   â†’ ĞĞ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚: 5 Ñ…ÑƒĞºĞ¾Ğ², ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ "Hookâ†’Contextâ†’Twistâ†’Revealâ†’CTA"
   â†’ Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ: 0 (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ retrieval)

3. ROUTER AGENT
   â†’ Ğ ĞµÑˆĞ°ĞµÑ‚: Ğ½ÑƒĞ¶ĞµĞ½ Ğ»Ğ¸ Research? Ğ”Ğ°, Ñ‚ĞµĞ¼Ğ° Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ
   â†’ ĞœĞ¾Ğ´ĞµĞ»ÑŒ: GPT-5 Nano (0.001Â¢)

4. RESEARCH AGENT
   â†’ Perplexity: "famous CEO disappearances cases"
   â†’ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚: 5 Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ñ… ĞºĞµĞ¹ÑĞ¾Ğ² Ñ Ğ´Ğ°Ñ‚Ğ°Ğ¼Ğ¸
   â†’ Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ: $0.005

5. SCRIPT AGENT
   â†’ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚: ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ¸Ğ· RAG + Ñ„Ğ°ĞºÑ‚Ñ‹ Ğ¸Ğ· Research
   â†’ ĞŸĞ¸ÑˆĞµÑ‚ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ Ğ¸Ğ· 6 ÑĞµĞ³Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ²
   â†’ ĞœĞ¾Ğ´ĞµĞ»ÑŒ: DeepSeek V3.2 (0.05Â¢)

6. QUALITY AGENT
   â†’ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚: hook ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğ¹? ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ²ĞµÑ€Ğ½Ğ°Ñ? Ñ„Ğ°ĞºÑ‚Ñ‹ ĞµÑÑ‚ÑŒ?
   â†’ Score: 85/100 âœ…
   â†’ ĞœĞ¾Ğ´ĞµĞ»ÑŒ: GPT-5 Mini (0.01Â¢)

7. VIDEO PROMPT AGENT (Ã—6 ÑĞµĞ³Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ², Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾)
   â†’ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚: ÑĞµĞ³Ğ¼ĞµĞ½Ñ‚Ñ‹ + cinematography(true-crime) Ğ¸Ğ· RAG
   â†’ ĞŸĞ¸ÑˆĞµÑ‚ 6 Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ² Ğ´Ğ»Ñ Sora
   â†’ ĞœĞ¾Ğ´ĞµĞ»ÑŒ: DeepSeek V3.2 (0.03Â¢ Ã— 6 = 0.18Â¢)

8. VOICE AGENT
   â†’ Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚: Ğ³Ğ¾Ğ»Ğ¾Ñ "Adam", low tone, slow pace
   â†’ Ğ˜Ğ· Ğ±Ğ°Ğ·Ñ‹ voice_profiles
   â†’ ĞœĞ¾Ğ´ĞµĞ»ÑŒ: GPT-5 Nano (0.001Â¢)

9. MUSIC AGENT
   â†’ Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ‚ Suno Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚: "dark ambient tension cinematic"
   â†’ Ğ˜Ğ· Ğ±Ğ°Ğ·Ñ‹ music_moods
   â†’ ĞœĞ¾Ğ´ĞµĞ»ÑŒ: GPT-5 Nano (0.001Â¢)

10. WORKFLOW BUILDER
    â†’ Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ²ÑÑ‘ Ğ² workflow JSON
    â†’ ĞœĞ¾Ğ´ĞµĞ»ÑŒ: GPT-5 Nano (0.002Â¢)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ğ˜Ğ¢ĞĞ“Ğ ĞĞ ĞĞ“Ğ•ĞĞ¢ĞĞ’: ~0.3Â¢ ($0.003)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ğ”Ğ°Ğ»ĞµĞµ:
- Ğ’Ğ¸Ğ´ĞµĞ¾ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ (Sora/Kling): ~$1.80
- TTS (ElevenLabs): ~$0.20
- Music (Suno): ~$0.20
- Render (FantaProjekt): ~$0.10

Ğ’Ğ¡Ğ•Ğ“Ğ: ~$2.33 Ğ·Ğ° 60 ÑĞµĞº Ğ²Ğ¸Ğ´ĞµĞ¾
```

---

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²

```
src/lib/agents/
â”œâ”€â”€ orchestrator/
â”‚   â”œâ”€â”€ intent-agent.ts       # ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
â”‚   â”œâ”€â”€ workflow-builder.ts   # Ğ¡Ñ‚Ñ€Ğ¾Ğ¸Ñ‚ workflow
â”‚   â”œâ”€â”€ budget-agent.ts       # Ğ¡Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ
â”‚   â”œâ”€â”€ context-agent.ts      # RAG Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
â”‚   â””â”€â”€ router-agent.ts       # Ğ’Ñ‹Ğ±Ğ¾Ñ€ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
â”‚
â”œâ”€â”€ content/
â”‚   â”œâ”€â”€ script-agent.ts       # ĞŸĞ¸ÑˆĞµÑ‚ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹
â”‚   â”œâ”€â”€ hook-agent.ts         # Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ‚ Ñ…ÑƒĞºĞ¸
â”‚   â”œâ”€â”€ segment-agent.ts      # Ğ Ğ°Ğ·Ğ±Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ½Ğ° ÑĞµĞ³Ğ¼ĞµĞ½Ñ‚Ñ‹
â”‚   â”œâ”€â”€ cta-agent.ts          # ĞŸÑ€Ğ¸Ğ·Ñ‹Ğ² Ğº Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ
â”‚   â”œâ”€â”€ rewrite-agent.ts      # Ğ£Ğ»ÑƒÑ‡ÑˆĞ°ĞµÑ‚ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹
â”‚   â””â”€â”€ translate-agent.ts    # ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´
â”‚
â”œâ”€â”€ visual/
â”‚   â”œâ”€â”€ video-prompt-agent.ts # ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ Ğ´Ğ»Ñ Ğ²Ğ¸Ğ´ĞµĞ¾
â”‚   â”œâ”€â”€ image-prompt-agent.ts # ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ Ğ´Ğ»Ñ ĞºĞ°Ñ€Ñ‚Ğ¸Ğ½Ğ¾Ğº
â”‚   â”œâ”€â”€ style-agent.ts        # Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑÑ‚Ğ¸Ğ»ÑŒ
â”‚   â””â”€â”€ thumbnail-agent.ts    # ĞŸÑ€ĞµĞ²ÑŒÑ
â”‚
â”œâ”€â”€ audio/
â”‚   â”œâ”€â”€ voice-agent.ts        # Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ³Ğ¾Ğ»Ğ¾ÑĞ°
â”‚   â”œâ”€â”€ music-agent.ts        # Suno Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹
â”‚   â””â”€â”€ sfx-agent.ts          # Ğ—Ğ²ÑƒĞºĞ¾Ğ²Ñ‹Ğµ ÑÑ„Ñ„ĞµĞºÑ‚Ñ‹
â”‚
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ research-agent.ts     # Ğ˜Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚ Ğ¿Ğ¾Ğ¸ÑĞº
â”‚   â””â”€â”€ quality-agent.ts      # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ°
â”‚
â””â”€â”€ common/
    â”œâ”€â”€ base-agent.ts         # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
    â”œâ”€â”€ model-router.ts       # Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ Ğ¿Ğ¾ tier
    â””â”€â”€ rag-client.ts         # ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ğ±Ğ°Ğ· Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
```

---

## âš¡ ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

```
Ğ¤ĞĞ—Ğ 1 (MVP):
â”œâ”€â”€ 10 Ğ±Ğ°Ğ· Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Ğ¿ÑƒÑÑ‚Ñ‹Ğµ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ + 50 Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ¾Ğ² Ğ² ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹)
â”œâ”€â”€ Intent Agent + Router Agent
â”œâ”€â”€ Script Agent + Video Prompt Agent
â”œâ”€â”€ Research Agent
â””â”€â”€ Quality Agent

Ğ¤ĞĞ—Ğ 2:
â”œâ”€â”€ ĞĞ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ· (500+ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ¾Ğ²)
â”œâ”€â”€ ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Content Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹
â”œâ”€â”€ Workflow Builder

Ğ¤ĞĞ—Ğ 3:
â”œâ”€â”€ Audio Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹
â”œâ”€â”€ Visual Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ (Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ)
â”œâ”€â”€ Ğ¡Ğ°Ğ¼Ğ¾Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ (Ğ°Ğ²Ñ‚Ğ¾-Ğ¿Ğ¾Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ±Ğ°Ğ·)
```

---

## ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ°

```
âŒ ĞŸĞ›ĞĞ¥Ğ: "Ğ¢Ñ‹ Content Creator, Ğ½Ğ°Ğ¿Ğ¸ÑˆĞ¸ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹..."
   â†’ ĞŸĞ¾ÑÑ€ĞµĞ´ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
   â†’ ĞĞµÑ‚ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ¸ĞºĞ¸, Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ¾Ğ², ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹
   â†’ ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ¶Ğ°Ğ½Ñ€ Ñ‚Ñ€ĞµĞ±ÑƒĞµÑ‚ ÑĞ²Ğ¾ĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ğ°

âœ… Ğ¥ĞĞ ĞĞ¨Ğ: Orchestrator + Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ + RAG + Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹
   â†’ ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
   â†’ Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· Ğ±Ğ°Ğ· Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹
   â†’ ĞĞ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ğ´ Ğ¶Ğ°Ğ½Ñ€/ÑÑ‚Ğ¸Ğ»ÑŒ
   â†’ ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ñ‚Ñ€Ğ°Ñ‚
```

---

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                           USER REQUEST                                      â”‚
â”‚                   "Ğ¥Ğ¾Ñ‡Ñƒ True Crime Ğ¿Ñ€Ğ¾ Ğ¸ÑÑ‡ĞµĞ·Ğ½Ğ¾Ğ²ĞµĞ½Ğ¸Ğµ"                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                        ğŸ§  ORCHESTRATOR AGENT                                â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   INTENT      â”‚  â”‚    BUDGET     â”‚  â”‚   CONTEXT     â”‚  â”‚   MEMORY    â”‚  â”‚
â”‚  â”‚   PARSER      â”‚  â”‚   MANAGER     â”‚  â”‚   BUILDER     â”‚  â”‚   STORE     â”‚  â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚               â”‚  â”‚             â”‚  â”‚
â”‚  â”‚ - Ğ–Ğ°Ğ½Ñ€        â”‚  â”‚ - Ğ›Ğ¸Ğ¼Ğ¸Ñ‚ ĞºÑ€Ğ´.  â”‚  â”‚ - RAG query   â”‚  â”‚ - Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ   â”‚  â”‚
â”‚  â”‚ - Ğ”Ğ»Ğ¸Ğ½Ğ°       â”‚  â”‚ - Model tier  â”‚  â”‚ - Examples    â”‚  â”‚ - Preferen. â”‚  â”‚
â”‚  â”‚ - Ğ¡Ñ‚Ğ¸Ğ»ÑŒ       â”‚  â”‚ - Fallbacks   â”‚  â”‚ - Genre rules â”‚  â”‚ - Drafts    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   ROUTER      â”‚  â”‚   PLANNER     â”‚  â”‚   QUALITY     â”‚                   â”‚
â”‚  â”‚               â”‚  â”‚               â”‚  â”‚   GATE        â”‚                   â”‚
â”‚  â”‚ - ĞšĞ°ĞºĞ¾Ğ¹ Ğ°Ğ³ĞµĞ½Ñ‚ â”‚  â”‚ - Sequence    â”‚  â”‚               â”‚                   â”‚
â”‚  â”‚ - Parallel?   â”‚  â”‚ - Dependenciesâ”‚  â”‚ - Score check â”‚                   â”‚
â”‚  â”‚ - Skip?       â”‚  â”‚ - Retries     â”‚  â”‚ - Retry logic â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                       SPECIALIZED AGENTS LAYER                              â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  ğŸ“ SCRIPT AGENT              ğŸ¬ VIDEO PROMPT AGENT                 â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Inputs:                      Inputs:                               â”‚   â”‚
â”‚  â”‚  - Genre + structure          - Script segments                     â”‚   â”‚
â”‚  â”‚  - RAG: viral examples        - RAG: cinematography rules           â”‚   â”‚
â”‚  â”‚  - RAG: hook formulas         - RAG: Sora/Runway examples           â”‚   â”‚
â”‚  â”‚  - Research data (optional)   - Visual style reference              â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Outputs:                     Outputs:                              â”‚   â”‚
â”‚  â”‚  - Hook (3 sec)               - Prompt per segment (50-100 words)   â”‚   â”‚
â”‚  â”‚  - Segments (6-8)             - Camera, lighting, motion specs      â”‚   â”‚
â”‚  â”‚  - CTA                        - Model recommendation                â”‚   â”‚
â”‚  â”‚  - Timing marks               - Fallback prompts                    â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Model: Claude Sonnet         Model: Claude Haiku + RAG             â”‚   â”‚
â”‚  â”‚  Cost: ~2K tokens             Cost: ~1K tokens Ã— N segments         â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  ğŸ–¼ï¸ IMAGE PROMPT AGENT         ğŸµ MUSIC AGENT                       â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Inputs:                      Inputs:                               â”‚   â”‚
â”‚  â”‚  - Scene description          - Script mood/genre                   â”‚   â”‚
â”‚  â”‚  - RAG: style references      - Timing (duration)                   â”‚   â”‚
â”‚  â”‚  - Color palette              - Energy curve                        â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Outputs:                     Outputs:                              â”‚   â”‚
â”‚  â”‚  - Midjourney/Flux prompt     - Suno prompt                         â”‚   â”‚
â”‚  â”‚  - Style parameters           - BPM, key, mood                      â”‚   â”‚
â”‚  â”‚  - Negative prompts           - Ducking points                      â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Model: GPT-4o-mini           Model: GPT-4o-mini                    â”‚   â”‚
â”‚  â”‚  Cost: ~500 tokens            Cost: ~300 tokens                     â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  ğŸ—£ï¸ VOICE AGENT                ğŸ” RESEARCH AGENT                    â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Inputs:                      Inputs:                               â”‚   â”‚
â”‚  â”‚  - Script text                - Topic/query                         â”‚   â”‚
â”‚  â”‚  - Genre mood                 - Required facts                      â”‚   â”‚
â”‚  â”‚  - Pacing requirements        - Freshness needs                     â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Outputs:                     Outputs:                              â”‚   â”‚
â”‚  â”‚  - Voice ID (ElevenLabs)      - Facts, dates, names                 â”‚   â”‚
â”‚  â”‚  - Speed/pitch settings       - Trending angles                     â”‚   â”‚
â”‚  â”‚  - Emphasis marks             - Source links                        â”‚   â”‚
â”‚  â”‚  - SSML tags                  - Credibility score                   â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  Model: GPT-4o-mini           Model: GPT-4o-mini + Tavily           â”‚   â”‚
â”‚  â”‚  Cost: ~400 tokens            Cost: ~1K tokens + search             â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚                        ğŸ“š KNOWLEDGE BASES (RAG)                             â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   VIRAL     â”‚ â”‚ CINEMATO-   â”‚ â”‚   VISUAL    â”‚ â”‚   GENRE     â”‚           â”‚
â”‚  â”‚  CONTENT    â”‚ â”‚   GRAPHY    â”‚ â”‚   STYLES    â”‚ â”‚   RULES     â”‚           â”‚
â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚           â”‚
â”‚  â”‚ 500+ hooks  â”‚ â”‚ Sora guide  â”‚ â”‚ MJ styles   â”‚ â”‚ 30 genres   â”‚           â”‚
â”‚  â”‚ Story arcs  â”‚ â”‚ Camera work â”‚ â”‚ Flux refs   â”‚ â”‚ Structures  â”‚           â”‚
â”‚  â”‚ CTA formulasâ”‚ â”‚ Lighting    â”‚ â”‚ Palettes    â”‚ â”‚ Pacing      â”‚           â”‚
â”‚  â”‚ Platform    â”‚ â”‚ Motion      â”‚ â”‚ Composition â”‚ â”‚ Tone        â”‚           â”‚
â”‚  â”‚ specifics   â”‚ â”‚ Transitions â”‚ â”‚ Aesthetics  â”‚ â”‚ Examples    â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚   MUSIC     â”‚ â”‚   VOICE     â”‚ â”‚   USER      â”‚                           â”‚
â”‚  â”‚   MOODS     â”‚ â”‚   STYLES    â”‚ â”‚   CUSTOM    â”‚                           â”‚
â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚                           â”‚
â”‚  â”‚ Genreâ†’BPM   â”‚ â”‚ Voice IDs   â”‚ â”‚ Ğ˜Ñ… ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹  â”‚                           â”‚
â”‚  â”‚ Moodâ†’key    â”‚ â”‚ Tones       â”‚ â”‚ Ğ˜Ñ… Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹  â”‚                           â”‚
â”‚  â”‚ Suno promptsâ”‚ â”‚ Pacing refs â”‚ â”‚ Preferences â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                             â”‚
â”‚                    Vector DB: Chroma / Pinecone                             â”‚
â”‚                    Hybrid Retrieval: Dense + Sparse                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾

### 1. ORCHESTRATOR AGENT

**Ğ Ğ¾Ğ»ÑŒ**: ĞœĞ¾Ğ·Ğ³ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹. ĞŸÑ€Ğ¸Ğ½Ğ¸Ğ¼Ğ°ĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ, Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€ÑƒĞµÑ‚, ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ¸Ñ€ÑƒĞµÑ‚, ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ¸Ñ€ÑƒĞµÑ‚ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾.

```typescript
// src/lib/agents/orchestrator/index.ts

interface OrchestratorConfig {
  maxBudget: number;           // Ğ›Ğ¸Ğ¼Ğ¸Ñ‚ ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ¾Ğ² Ğ½Ğ° workflow
  qualityThreshold: number;    // ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ score (0-100)
  maxRetries: number;          // ĞŸĞ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸ Ğ¿Ñ€Ğ¸ Ğ½Ğ¸Ğ·ĞºĞ¾Ğ¼ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğµ
  enableResearch: boolean;     // Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğ² Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚
}

interface WorkflowPlan {
  genre: string;
  duration: number;
  segments: number;
  agents: AgentTask[];
  estimatedCost: number;
  parallelGroups: string[][];  // ĞšĞ°ĞºĞ¸Ğµ Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾
}

class Orchestrator {
  // 1. Parse intent
  async parseIntent(userInput: string): Promise<Intent> {
    // ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚: Ğ¶Ğ°Ğ½Ñ€, Ğ´Ğ»Ğ¸Ğ½Ğ°, ÑÑ‚Ğ¸Ğ»ÑŒ, Ğ¾ÑĞ¾Ğ±Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
    // Model: gpt-4o-mini (Ğ´ĞµÑˆÑ‘Ğ²Ñ‹Ğ¹, Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹)
  }

  // 2. Build context from RAG
  async buildContext(intent: Intent): Promise<Context> {
    // Ğ”Ğ¾ÑÑ‚Ğ°Ñ‘Ñ‚ Ğ¸Ğ· RAG: Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹, Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ¶Ğ°Ğ½Ñ€Ğ°, Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñ‹
    // Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ´Ğ»Ñ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²
  }

  // 3. Plan workflow
  async planWorkflow(intent: Intent, context: Context): Promise<WorkflowPlan> {
    // Ğ ĞµÑˆĞ°ĞµÑ‚: ĞºĞ°ĞºĞ¸Ğµ Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹, Ğ² ĞºĞ°ĞºĞ¾Ğ¼ Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞµ, Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾?
    // Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ±ÑĞ´Ğ¶ĞµÑ‚
  }

  // 4. Execute with quality gates
  async execute(plan: WorkflowPlan): Promise<WorkflowResult> {
    // Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¿Ğ¾ Ğ¿Ğ»Ğ°Ğ½Ñƒ
    // ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ½Ğ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¼ ÑÑ‚Ğ°Ğ¿Ğµ
    // Retry ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾
  }

  // 5. Model routing
  selectModel(task: AgentTask): ModelConfig {
    // Tier 1 (simple): gpt-4o-mini â€” $0.15/1M
    // Tier 2 (medium): claude-haiku â€” $1/1M
    // Tier 3 (complex): claude-sonnet â€” $3/1M
  }
}
```

**Subcomponents:**

| Component | Ğ Ğ¾Ğ»ÑŒ | Model |
|-----------|------|-------|
| Intent Parser | ĞŸĞ¾Ğ½ÑÑ‚ÑŒ Ñ‡Ñ‚Ğ¾ Ñ…Ğ¾Ñ‡ĞµÑ‚ ÑĞ·ĞµÑ€ | gpt-4o-mini |
| Budget Manager | ĞšĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ² | â€” (Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°) |
| Context Builder | RAG Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ | â€” (retrieval) |
| Router | Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°/Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ | gpt-4o-mini |
| Planner | Sequence Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² | gpt-4o-mini |
| Quality Gate | ĞÑ†ĞµĞ½ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° | gpt-4o-mini |
| Memory Store | Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ, preferences | â€” (DB) |

---

### 2. SCRIPT AGENT

**Ğ Ğ¾Ğ»ÑŒ**: ĞŸĞ¸ÑˆĞµÑ‚ Ğ²Ğ¸Ñ€ÑƒÑĞ½Ñ‹Ğµ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸ Ñ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¹ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¾Ğ¹.

```typescript
// src/lib/agents/script/index.ts

interface ScriptAgentInput {
  genre: string;
  topic: string;
  duration: number;           // ÑĞµĞºÑƒĞ½Ğ´Ñ‹
  platform: 'tiktok' | 'reels' | 'shorts' | 'youtube';
  tone: string;
  researchData?: ResearchData;  // ĞÑ‚ Research Agent
  ragContext: {
    hooks: string[];          // 5 Ğ»ÑƒÑ‡ÑˆĞ¸Ñ… Ñ…ÑƒĞºĞ¾Ğ² Ğ´Ğ»Ñ Ğ¶Ğ°Ğ½Ñ€Ğ°
    structure: string;        // "Hook â†’ Context â†’ Twist â†’ Reveal"
    examples: string[];       // 3 Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ° ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸ĞµĞ²
    platformRules: string;    // Ğ¡Ğ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ° Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹
  };
}

interface ScriptOutput {
  hook: {
    text: string;
    duration: number;         // 2-3 ÑĞµĞº
    visualCue: string;        // Ğ§Ñ‚Ğ¾ Ğ½Ğ° ÑĞºÑ€Ğ°Ğ½Ğµ
  };
  segments: Array<{
    id: number;
    text: string;
    duration: number;
    beat: string;             // "context" | "tension" | "reveal" | "cta"
    emotion: string;          // Ğ”Ğ»Ñ voice agent
    visualDirection: string;  // Ğ”Ğ»Ñ video prompt agent
  }>;
  cta: {
    text: string;
    type: 'follow' | 'like' | 'comment' | 'link';
  };
  metadata: {
    wordCount: number;
    estimatedPace: 'slow' | 'medium' | 'fast';
    hookStrength: number;     // 0-100 score
  };
}

// Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ñ‚Ğ°Ğº:
function buildScriptPrompt(input: ScriptAgentInput): string {
  return `
You are an expert viral content scriptwriter.

## GENRE: ${input.genre}
## STRUCTURE FOR THIS GENRE:
${input.ragContext.structure}

## PROVEN HOOKS (use similar pattern):
${input.ragContext.hooks.map((h, i) => `${i+1}. "${h}"`).join('\n')}

## EXAMPLE SCRIPTS:
${input.ragContext.examples.join('\n---\n')}

## PLATFORM RULES (${input.platform}):
${input.ragContext.platformRules}

## YOUR TASK:
Write a ${input.duration}s script about: "${input.topic}"
Tone: ${input.tone}

${input.researchData ? `## RESEARCH DATA TO USE:\n${input.researchData}` : ''}

Output JSON with hook, segments[], cta.
  `.trim();
}
```

**RAG Data Ğ´Ğ»Ñ Script Agent:**

| ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ | Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ | Chunking |
|-----------|-----------|----------|
| `hooks` | 500+ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‰Ğ¸Ñ… Ñ…ÑƒĞºĞ¾Ğ² Ğ¿Ğ¾ Ğ¶Ğ°Ğ½Ñ€Ğ°Ğ¼ | 1 hook = 1 chunk |
| `structures` | Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ Ğ´Ğ»Ñ 30 Ğ¶Ğ°Ğ½Ñ€Ğ¾Ğ² | 1 structure = 1 chunk |
| `examples` | 300+ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğ¾Ğ² ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸ĞµĞ² | 1 script = 1 chunk |
| `platform_rules` | ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° TikTok/Reels/Shorts | ĞŸĞ¾ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğµ |
| `cta_formulas` | 100+ CTA Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ» | 1 CTA = 1 chunk |

---

### 3. VIDEO PROMPT AGENT

**Ğ Ğ¾Ğ»ÑŒ**: ĞŸĞ¸ÑˆĞµÑ‚ ĞºĞ¸Ğ½ĞµĞ¼Ğ°Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ Ğ´Ğ»Ñ Sora/Kling/Runway.

```typescript
// src/lib/agents/video-prompt/index.ts

interface VideoPromptInput {
  segment: ScriptSegment;
  genre: string;
  visualStyle: string;        // "cinematic dark", "vibrant pop", etc.
  ragContext: {
    cameraRules: string;      // Camera angles for genre
    lightingRules: string;    // Lighting setups
    motionRules: string;      // Motion/pacing
    examplePrompts: string[]; // 3 working prompts
    modelSpecifics: string;   // Sora vs Kling differences
  };
}

interface VideoPromptOutput {
  prompt: string;             // 50-100 words, cinematic language
  technicalSpecs: {
    aspectRatio: '9:16' | '16:9' | '1:1';
    duration: number;
    fps: 24 | 30 | 60;
    camera: string;           // "slow push-in", "tracking shot"
    lens: string;             // "35mm", "85mm portrait"
    lighting: string;         // "low-key dramatic", "soft diffused"
    colorGrade: string;       // "teal and orange", "desaturated"
  };
  recommendedModel: 'sora' | 'kling' | 'runway' | 'minimax';
  fallbackPrompt: string;     // Simpler version if fails
  pexelsFallback: string;     // Search query for stock
}

// ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑÑ Ğ¿Ğ¾ ĞºĞ¸Ğ½ĞµĞ¼Ğ°Ñ‚Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ¼Ñƒ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñƒ
function buildVideoPromptPrompt(input: VideoPromptInput): string {
  return `
You are a cinematographer writing AI video generation prompts.

## CINEMATOGRAPHY RULES FOR ${input.genre}:

### CAMERA:
${input.ragContext.cameraRules}

### LIGHTING:
${input.ragContext.lightingRules}

### MOTION:
${input.ragContext.motionRules}

## EXAMPLE PROMPTS THAT WORK:
${input.ragContext.examplePrompts.join('\n---\n')}

## MODEL-SPECIFIC NOTES:
${input.ragContext.modelSpecifics}

## SCENE TO VISUALIZE:
Script text: "${input.segment.text}"
Emotion: ${input.segment.emotion}
Visual direction: ${input.segment.visualDirection}
Duration: ${input.segment.duration}s

Write a 50-100 word cinematic prompt. Structure:
1. Subject and environment
2. Camera framing and movement
3. Lighting and color
4. Motion and pacing

Be specific. Use sensory language. Avoid vague words like "amazing" or "beautiful".
  `.trim();
}
```

**RAG Data Ğ´Ğ»Ñ Video Prompt Agent:**

| ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ | Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº | ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ |
|-----------|----------|---------|
| `sora_prompts` | OpenAI Cookbook, Reddit | 200+ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ² |
| `cinematography` | Film school resources | Camera, lighting guides |
| `genre_visuals` | ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¶Ğ°Ğ½Ñ€Ğ¾Ğ² | True Crime = dark, low-key |
| `model_guides` | Sora, Kling, Runway docs | Ğ¡Ğ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ° ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ |

---

### 4. RESEARCH AGENT (Web Access Layer)

**Ğ Ğ¾Ğ»ÑŒ**: Ğ˜Ñ‰ĞµÑ‚ Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½ÑƒÑ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ² Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚Ğµ. **ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ™ ĞšĞĞœĞŸĞĞĞ•ĞĞ¢** Ğ´Ğ»Ñ ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°.

> **Ğ ĞµÑ„ĞµÑ€ĞµĞ½ÑÑ‹:**
> - [Tavily - Web Access Layer for AI Agents](https://www.tavily.com/)
> - [Perplexity vs Tavily 2025](https://alphacorp.ai/perplexity-search-api-vs-tavily-the-better-choice-for-rag-and-agents-in-2025/)
> - [LangGraph Deep Research Agent](https://towardsdatascience.com/langgraph-101-lets-build-a-deep-research-agent/)

---

#### 4.1 ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¸Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚-Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        RESEARCH AGENT ARCHITECTURE                          â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         QUERY ROUTER                                 â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ â†’ Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€               â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ Quick Facts â”‚ â”‚ Deep Researchâ”‚ â”‚ Trending   â”‚ â”‚ Verificationâ”‚   â”‚   â”‚
â”‚  â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚ â”‚             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â†’ Perplexityâ”‚ â”‚ â†’ Tavily    â”‚ â”‚ â†’ Serper   â”‚ â”‚ â†’ Multi     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚    Sonar    â”‚ â”‚    Advanced â”‚ â”‚    + X/Newsâ”‚ â”‚    Source   â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      SEARCH PROVIDERS                                â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚  â”‚    TAVILY       â”‚  â”‚   PERPLEXITY    â”‚  â”‚     SERPER      â”‚     â”‚   â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚     â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Deep research â”‚  â”‚ â€¢ Quick answers â”‚  â”‚ â€¢ Google SERPs  â”‚     â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ RAG-optimized â”‚  â”‚ â€¢ With citationsâ”‚  â”‚ â€¢ News/Images   â”‚     â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Content extractâ”‚ â”‚ â€¢ Fast (400ms) â”‚  â”‚ â€¢ Knowledge box â”‚     â”‚   â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚     â”‚   â”‚
â”‚  â”‚  â”‚ $0.008/credit   â”‚  â”‚ $5/1000 queries â”‚  â”‚ $0.001/query    â”‚     â”‚   â”‚
â”‚  â”‚  â”‚ (1K free/month) â”‚  â”‚                 â”‚  â”‚                 â”‚     â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚   â”‚
â”‚  â”‚  â”‚  OPENAI SEARCH  â”‚  â”‚    FIRECRAWL    â”‚                          â”‚   â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚                          â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Built-in LLM  â”‚  â”‚ â€¢ Full page     â”‚                          â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ gpt-4o-search â”‚  â”‚   scraping      â”‚                          â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Grounded resp.â”‚  â”‚ â€¢ JS rendering  â”‚                          â”‚   â”‚
â”‚  â”‚  â”‚                 â”‚  â”‚                 â”‚                          â”‚   â”‚
â”‚  â”‚  â”‚ $2.50/$10 /1M   â”‚  â”‚ $0.002/page     â”‚                          â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â†“                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      GROUNDING & CITATIONS                           â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚  â€¢ ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ„Ğ°ĞºÑ‚ Ğ¿Ñ€Ğ¸Ğ²ÑĞ·Ğ°Ğ½ Ğº Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºÑƒ (URL)                          â”‚   â”‚
â”‚  â”‚  â€¢ Credibility score (0-100) Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ´Ğ¾Ğ¼ĞµĞ½Ğ°                      â”‚   â”‚
â”‚  â”‚  â€¢ Timestamp Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° (Ğ½Ğ°ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾)                        â”‚   â”‚
â”‚  â”‚  â€¢ Cross-validation Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ°Ğ¼Ğ¸                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 4.2 ĞŸÑ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ñ‹ Ğ¿Ğ¾Ğ¸ÑĞºĞ°

```typescript
// src/lib/agents/research/providers.ts

interface SearchProvider {
  name: string;
  search(query: string, options: SearchOptions): Promise<SearchResult[]>;
  costPerQuery: number;
  latencyMs: number;
  bestFor: string[];
}

const SEARCH_PROVIDERS: Record<string, SearchProvider> = {

  // 1. TAVILY â€” Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ´Ğ»Ñ Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¾Ğ³Ğ¾ Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
  tavily: {
    name: 'Tavily',
    costPerQuery: 0.008,  // 1 credit = $0.008
    latencyMs: 2000,
    bestFor: ['deep research', 'content extraction', 'RAG context'],

    async search(query: string, options: SearchOptions) {
      const response = await tavily.search({
        query,
        search_depth: options.depth || 'advanced',
        include_answer: true,
        include_raw_content: options.extractContent,
        max_results: options.limit || 10,
        include_domains: options.domains,
        exclude_domains: options.excludeDomains
      });

      return response.results.map(r => ({
        title: r.title,
        url: r.url,
        content: r.content,
        rawContent: r.raw_content,
        score: r.score,
        publishedDate: r.published_date
      }));
    }
  },

  // 2. PERPLEXITY SONAR â€” Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹ Ñ Ñ†Ğ¸Ñ‚Ğ°Ñ‚Ğ°Ğ¼Ğ¸
  perplexity: {
    name: 'Perplexity Sonar',
    costPerQuery: 0.005,  // $5/1000 = $0.005
    latencyMs: 400,
    bestFor: ['quick facts', 'simple questions', 'real-time answers'],

    async search(query: string, options: SearchOptions) {
      const response = await perplexity.chat.completions.create({
        model: options.deep ? 'sonar-pro' : 'sonar',
        messages: [{ role: 'user', content: query }],
        search_domain_filter: options.domains,
        return_citations: true
      });

      return [{
        answer: response.choices[0].message.content,
        citations: response.citations,
        relatedQuestions: response.related_questions
      }];
    }
  },

  // 3. SERPER â€” Google SERPs Ğ´Ğ»Ñ Ñ‚Ñ€ĞµĞ½Ğ´Ğ¾Ğ² Ğ¸ Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚ĞµĞ¹
  serper: {
    name: 'Serper.dev',
    costPerQuery: 0.001,
    latencyMs: 800,
    bestFor: ['trending topics', 'news', 'images', 'knowledge panels'],

    async search(query: string, options: SearchOptions) {
      const response = await serper.search({
        q: query,
        type: options.type || 'search',  // 'news', 'images'
        num: options.limit || 10,
        tbs: options.freshness  // 'qdr:d' = last day
      });

      return {
        organic: response.organic,
        knowledgeGraph: response.knowledgeGraph,
        peopleAlsoAsk: response.peopleAlsoAsk,
        relatedSearches: response.relatedSearches
      };
    }
  },

  // 4. OPENAI SEARCH â€” LLM Ñ Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¼ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ¼
  openaiSearch: {
    name: 'OpenAI Search',
    costPerQuery: 0.003,  // ~3K tokens avg
    latencyMs: 3000,
    bestFor: ['complex synthesis', 'grounded answers', 'multi-step research'],

    async search(query: string, options: SearchOptions) {
      const response = await openrouter.chat.completions.create({
        model: 'openai/gpt-4o-search-preview',
        messages: [{ role: 'user', content: query }]
      });

      return {
        answer: response.choices[0].message.content,
        // OpenAI search provides grounded responses
        grounded: true
      };
    }
  },

  // 5. FIRECRAWL â€” Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğµ Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
  firecrawl: {
    name: 'Firecrawl',
    costPerQuery: 0.002,
    latencyMs: 5000,
    bestFor: ['full page content', 'structured data', 'JS-rendered pages'],

    async scrape(url: string, options: ScrapeOptions) {
      const response = await firecrawl.scrapeUrl(url, {
        formats: ['markdown', 'html'],
        onlyMainContent: true
      });

      return {
        markdown: response.markdown,
        metadata: response.metadata,
        links: response.links
      };
    }
  }
};
```

---

#### 4.3 Query Router (Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ°)

```typescript
// src/lib/agents/research/router.ts

interface ResearchQuery {
  query: string;
  type: 'facts' | 'news' | 'trends' | 'verification' | 'deep';
  freshness: 'any' | 'hour' | 'day' | 'week' | 'month';
  budget: number;  // max credits to spend
}

function routeQuery(input: ResearchQuery): SearchStrategy {
  const strategies: Record<string, SearchStrategy> = {

    // Quick facts â€” Perplexity (fast, cheap)
    facts: {
      primary: 'perplexity',
      fallback: 'tavily',
      model: 'openai/gpt-5-nano',  // Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
      maxCost: 0.01
    },

    // Breaking news â€” Serper + Perplexity
    news: {
      primary: 'serper',
      secondary: 'perplexity',
      params: { type: 'news', freshness: 'qdr:d' },
      model: 'openai/gpt-4o-mini',
      maxCost: 0.02
    },

    // Trending topics â€” Serper (Google trends, related searches)
    trends: {
      primary: 'serper',
      params: { type: 'search' },
      extractFields: ['relatedSearches', 'peopleAlsoAsk'],
      model: 'openai/gpt-5-nano',
      maxCost: 0.01
    },

    // Fact verification â€” Multi-source cross-check
    verification: {
      primary: 'tavily',
      secondary: 'perplexity',
      tertiary: 'serper',
      crossValidate: true,  // Ğ¡Ñ€Ğ°Ğ²Ğ½Ğ¸Ñ‚ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹ Ğ¸Ğ· Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¾Ğ²
      model: 'deepseek/deepseek-v3.2',  // Ğ”Ğ»Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°
      maxCost: 0.05
    },

    // Deep research â€” Tavily + content extraction
    deep: {
      primary: 'tavily',
      params: { search_depth: 'advanced', include_raw_content: true },
      secondary: 'firecrawl',  // Ğ”Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†
      model: 'openai/gpt-5.1',  // Ğ”Ğ»Ñ ÑĞ¸Ğ½Ñ‚ĞµĞ·Ğ°
      maxCost: 0.10
    }
  };

  return strategies[input.type] || strategies.facts;
}
```

---

#### 4.4 Research Agent Implementation

```typescript
// src/lib/agents/research/index.ts

interface ResearchAgentInput {
  query: string;
  type: 'facts' | 'news' | 'trends' | 'verification' | 'deep';
  freshness: 'any' | 'hour' | 'day' | 'week' | 'month';
  requiredFields: string[];   // ["dates", "names", "numbers", "sources"]
  genre?: string;             // Ğ”Ğ»Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ°
  budget?: number;            // Ğ›Ğ¸Ğ¼Ğ¸Ñ‚ ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ¾Ğ²
}

interface ResearchOutput {
  // Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ„Ğ°ĞºÑ‚Ñ‹ Ñ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ°Ğ¼Ğ¸
  facts: Array<{
    claim: string;
    source: string;
    sourceUrl: string;
    credibilityScore: number;      // 0-100
    publishedDate: string;
    crossValidated: boolean;       // ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¾ Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¼Ğ¸ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ°Ğ¼Ğ¸?
  }>;

  // Ğ”Ğ»Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ°
  trendingAngles: string[];        // ĞĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´Ñ‹ Ğº Ñ‚ĞµĞ¼Ğµ
  suggestedHooks: string[];        // Ğ¥ÑƒĞºĞ¸ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ñ‚Ñ€ĞµĞ½Ğ´Ğ¾Ğ²
  relatedTopics: string[];         // Ğ¡Ğ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‚ĞµĞ¼Ñ‹ Ğ´Ğ»Ñ ÑĞµĞ³Ğ¼ĞµĞ½Ñ‚Ğ¾Ğ²

  // ĞŸÑ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ñ
  warnings: Array<{
    type: 'unverified' | 'outdated' | 'controversial' | 'legal';
    message: string;
    affectedClaims: string[];
  }>;

  // ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  metadata: {
    totalSources: number;
    searchProvider: string;
    costCredits: number;
    latencyMs: number;
  };
}

class ResearchAgent {
  async research(input: ResearchAgentInput): Promise<ResearchOutput> {
    // 1. Route to optimal provider(s)
    const strategy = routeQuery(input);

    // 2. Execute search
    const searchResults = await this.executeSearch(strategy, input);

    // 3. Cross-validate if needed
    if (strategy.crossValidate) {
      await this.crossValidate(searchResults);
    }

    // 4. Extract structured facts
    const facts = await this.extractFacts(searchResults, input.requiredFields);

    // 5. Generate content suggestions
    const suggestions = await this.generateSuggestions(facts, input.genre);

    // 6. Check for warnings
    const warnings = await this.checkWarnings(facts);

    return {
      facts,
      ...suggestions,
      warnings,
      metadata: { ... }
    };
  }

  // Grounding â€” Ğ¿Ñ€Ğ¸Ğ²ÑĞ·ĞºĞ° Ñ„Ğ°ĞºÑ‚Ğ¾Ğ² Ğº Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ°Ğ¼
  private async extractFacts(
    results: SearchResult[],
    requiredFields: string[]
  ): Promise<Fact[]> {
    const prompt = `
Extract structured facts from these search results.
Required fields: ${requiredFields.join(', ')}

For EACH fact:
1. Extract the claim
2. Note the source URL
3. Rate credibility (0-100) based on source authority
4. Check if multiple sources agree

Search Results:
${JSON.stringify(results, null, 2)}

Output JSON array of facts.
    `;

    const response = await llm.generate({
      model: 'deepseek/deepseek-v3.2',  // Cheap but powerful
      prompt,
      responseFormat: { type: 'json_object' }
    });

    return JSON.parse(response).facts;
  }

  // Cross-validation Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ°Ğ¼Ğ¸
  private async crossValidate(facts: Fact[]): Promise<void> {
    for (const fact of facts) {
      // ĞŸĞ¾Ğ¸ÑĞº Ñ‚Ğ¾Ğ³Ğ¾ Ğ¶Ğµ Ñ„Ğ°ĞºÑ‚Ğ° Ğ² Ğ´Ñ€ÑƒĞ³Ğ¸Ñ… Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ°Ñ…
      const validation = await this.searchProviders.perplexity.search(
        `verify: "${fact.claim}"`,
        { limit: 3 }
      );

      fact.crossValidated = validation.some(v =>
        this.compareFactsMatch(fact.claim, v.content)
      );
    }
  }
}
```

---

#### 4.5 ĞšĞ¾Ğ³Ğ´Ğ° Ğ²ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ Research Agent

| Ğ–Ğ°Ğ½Ñ€ | Research Ğ½ÑƒĞ¶ĞµĞ½? | Ğ¢Ğ¸Ğ¿ Ğ¿Ğ¾Ğ¸ÑĞºĞ° | ĞŸÑ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€ |
|------|-----------------|------------|-----------|
| **True Crime** | âœ… ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ | `deep` + `verification` | Tavily + Perplexity |
| **News** | âœ… ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ | `news` | Serper + Perplexity |
| **Facts/Did You Know** | âœ… Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ | `facts` + `verification` | Perplexity + Tavily |
| **Trends/Explainers** | âœ… Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ | `trends` | Serper |
| **How-to/Tutorial** | âš ï¸ ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ | `facts` | Perplexity |
| **Story/POV** | âŒ ĞĞµ Ğ½ÑƒĞ¶ĞµĞ½ | â€” | â€” |
| **Aesthetic/Visual** | âŒ ĞĞµ Ğ½ÑƒĞ¶ĞµĞ½ | â€” | â€” |

---

#### 4.6 Cost Optimization Ğ´Ğ»Ñ Research

```typescript
// Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ğ¸ Ğ½Ğ° Ğ¿Ğ¾Ğ¸ÑĞºĞµ

const RESEARCH_COST_STRATEGIES = {
  // 1. ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
  cache: {
    ttl: {
      facts: 24 * 60 * 60,      // 24 Ñ‡Ğ°ÑĞ° Ğ´Ğ»Ñ Ñ„Ğ°ĞºÑ‚Ğ¾Ğ²
      news: 1 * 60 * 60,        // 1 Ñ‡Ğ°Ñ Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚ĞµĞ¹
      trends: 6 * 60 * 60       // 6 Ñ‡Ğ°ÑĞ¾Ğ² Ğ´Ğ»Ñ Ñ‚Ñ€ĞµĞ½Ğ´Ğ¾Ğ²
    }
  },

  // 2. Batch queries â€” Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
  batching: {
    // Ğ•ÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾ 5 Ñ„Ğ°ĞºÑ‚Ğ¾Ğ² Ğ´Ğ»Ñ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ñ, Ğ´ĞµĞ»Ğ°ĞµĞ¼ 1 Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ, Ğ½Ğµ 5
    combineRelatedQueries: true,
    maxQueriesPerBatch: 5
  },

  // 3. Progressive research
  progressive: {
    // Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ´ĞµÑˆÑ‘Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº, Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼ Ğ³Ğ»ÑƒĞ±Ğ¶Ğµ ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾
    levels: [
      { provider: 'perplexity', cost: 0.005 },
      { provider: 'tavily', cost: 0.016 },
      { provider: 'deep', cost: 0.05 }
    ]
  },

  // 4. Smart routing Ğ¿Ğ¾ Ğ±ÑĞ´Ğ¶ĞµÑ‚Ñƒ
  budgetAware: {
    // Ğ•ÑĞ»Ğ¸ Ğ±ÑĞ´Ğ¶ĞµÑ‚ Ğ¼Ğ°Ğ»ĞµĞ½ÑŒĞºĞ¸Ğ¹ â€” Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Perplexity
    // Ğ•ÑĞ»Ğ¸ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ â€” full deep research
    thresholds: {
      low: 0.02,    // Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ quick facts
      medium: 0.05, // standard research
      high: 0.10    // deep + verification
    }
  }
};
```

---

### 5. IMAGE PROMPT AGENT

**Ğ Ğ¾Ğ»ÑŒ**: ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ Ğ´Ğ»Ñ Midjourney/Flux/DALL-E Ğ´Ğ»Ñ thumbnail Ğ¸ ÑÑ‚Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ñ… ĞºĞ°Ğ´Ñ€Ğ¾Ğ².

```typescript
interface ImagePromptInput {
  scene: string;
  style: string;
  purpose: 'thumbnail' | 'scene' | 'overlay';
  ragContext: {
    styleExamples: string[];
    compositionRules: string;
    colorPalette: string;
  };
}

interface ImagePromptOutput {
  prompt: string;
  negativePrompt: string;
  parameters: {
    ar: string;               // --ar 9:16
    style: string;            // --style raw
    chaos: number;            // --chaos 20
  };
  model: 'midjourney' | 'flux' | 'dalle';
}
```

---

### 6. MUSIC AGENT

**Ğ Ğ¾Ğ»ÑŒ**: Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ‚ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ Ğ´Ğ»Ñ Suno/Udio.

```typescript
interface MusicAgentInput {
  genre: string;
  mood: string;
  duration: number;
  energyCurve: 'building' | 'steady' | 'peaks';
  ragContext: {
    genreBPM: { min: number; max: number };
    moodToKey: string;        // "tense" â†’ minor key
    sunoExamples: string[];
  };
}

interface MusicOutput {
  prompt: string;             // Suno prompt
  tags: string[];             // [instrumental, dark, ambient]
  bpm: number;
  key: string;
  duckingPoints: number[];    // Ğ“Ğ´Ğµ Ğ¿Ñ€Ğ¸Ğ³Ğ»ÑƒÑˆĞ¸Ñ‚ÑŒ Ğ´Ğ»Ñ Ğ³Ğ¾Ğ»Ğ¾ÑĞ°
}
```

---

### 7. VOICE AGENT

**Ğ Ğ¾Ğ»ÑŒ**: Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ³Ğ¾Ğ»Ğ¾Ñ Ğ¸ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ´Ğ»Ñ TTS.

```typescript
interface VoiceAgentInput {
  script: ScriptOutput;
  genre: string;
  ragContext: {
    voiceProfiles: VoiceProfile[];
    genreTones: string;       // True Crime = "low, measured, suspenseful"
    pacingGuide: string;
  };
}

interface VoiceOutput {
  voiceId: string;            // ElevenLabs voice ID
  settings: {
    stability: number;
    similarityBoost: number;
    style: number;
    speakerBoost: boolean;
  };
  ssmlMarks: string;          // SSML Ñ€Ğ°Ğ·Ğ¼ĞµÑ‚ĞºĞ° Ğ´Ğ»Ñ Ğ¿Ğ°ÑƒĞ· Ğ¸ emphasis
  segmentSettings: Array<{    // Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ñ‡Ğ°ÑÑ‚ĞµĞ¹
    segmentId: number;
    speed: number;
    pitch: string;
  }>;
}
```

---

## Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°
- 30+ Ğ¶Ğ°Ğ½Ñ€Ğ¾Ğ²
- ĞĞµĞ»ÑŒĞ·Ñ Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚
- ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ ÑĞ²Ğ¾Ğ¸ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹

### Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: Prompt Template Engine

```typescript
// src/lib/agents/prompts/template-engine.ts

interface PromptTemplate {
  id: string;
  agent: 'script' | 'video' | 'image' | 'music' | 'voice';
  basePrompt: string;
  variables: string[];        // {{genre}}, {{examples}}, etc.
  ragQueries: {               // ĞšĞ°ĞºĞ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚ÑŒ Ğ¸Ğ· RAG
    collection: string;
    query: string;
    limit: number;
  }[];
}

class PromptTemplateEngine {
  // 1. ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½ (Ğ¸Ğ· Ğ‘Ğ” Ğ¸Ğ»Ğ¸ Ğ´ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ñ‹Ğ¹)
  async getTemplate(agent: string, genre: string): Promise<PromptTemplate> {
    // Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ¸Ñ‰ĞµĞ¼ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğ¹ Ğ´Ğ»Ñ Ğ¶Ğ°Ğ½Ñ€Ğ°
    let template = await db.templates.findOne({ agent, genre });

    // Ğ•ÑĞ»Ğ¸ Ğ½ĞµÑ‚ â€” Ğ±ĞµÑ€Ñ‘Ğ¼ Ğ´ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ñ‹Ğ¹
    if (!template) {
      template = await db.templates.findOne({ agent, genre: 'default' });
    }

    return template;
  }

  // 2. Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¸Ğ· RAG
  async buildPrompt(template: PromptTemplate, input: any): Promise<string> {
    let prompt = template.basePrompt;

    // Ğ”Ğ¾ÑÑ‚Ğ°Ñ‘Ğ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· RAG
    for (const ragQuery of template.ragQueries) {
      const data = await rag.query({
        collection: ragQuery.collection,
        query: ragQuery.query.replace(/\{\{(\w+)\}\}/g, (_, key) => input[key]),
        limit: ragQuery.limit
      });
      prompt = prompt.replace(`{{${ragQuery.collection}}}`, data.join('\n'));
    }

    // Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½ÑĞµĞ¼ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ
    for (const variable of template.variables) {
      prompt = prompt.replace(`{{${variable}}}`, input[variable] || '');
    }

    return prompt;
  }

  // 3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ/Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½ (Ğ´Ğ»Ñ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ñ… Ğ¶Ğ°Ğ½Ñ€Ğ¾Ğ²)
  async upsertTemplate(template: PromptTemplate): Promise<void> {
    await db.templates.upsert(template);
  }
}
```

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ° Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¶Ğ°Ğ½Ñ€Ğ°

```typescript
// ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ ÑĞ¾Ğ·Ğ´Ğ°Ğ» ÑĞ²Ğ¾Ğ¹ Ğ¶Ğ°Ğ½Ñ€ "Crypto News"
const customTemplate: PromptTemplate = {
  id: 'script_crypto_news',
  agent: 'script',
  basePrompt: `
You are a crypto/web3 content expert.

## STRUCTURE:
Hook (price/event shock) â†’ Context â†’ Analysis â†’ Prediction â†’ CTA

## HOOKS THAT WORK IN CRYPTO:
{{hooks}}

## EXAMPLE SCRIPTS:
{{examples}}

## RULES:
- Use specific numbers ($, %)
- Mention timeframes
- Add urgency without FUD
- Cite sources

Write script about: {{topic}}
Duration: {{duration}}s
  `,
  variables: ['topic', 'duration'],
  ragQueries: [
    { collection: 'crypto_hooks', query: 'crypto news hooks', limit: 5 },
    { collection: 'crypto_scripts', query: '{{topic}}', limit: 3 }
  ]
};
```

---

## Cost Optimization

### Model Routing Strategy (Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ†ĞµĞ½Ñ‹ Q4 2025)

> **Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº Ñ†ĞµĞ½:** `/fenta-docs/api/openrouter/openrouter-top20-models-20251207.md`

```typescript
// src/lib/agents/cost/model-router.ts

const MODEL_TIERS = {
  // TIER 0: Ultra-cheap (routing, classification, simple extraction)
  tier0: {
    models: [
      'openai/gpt-5-nano',           // $0.05/$0.40 â€” fastest, 400K context
      'deepseek/deepseek-r1-0528-qwen3-8b'  // $0.02/$0.10 â€” ultra cheap
    ],
    avgCostPer1M: 0.05,
    use: ['intent parsing', 'routing', 'classification', 'simple validation']
  },

  // TIER 1: Budget (medium complexity tasks)
  tier1: {
    models: [
      'openai/gpt-4o-mini',          // $0.15/$0.60 â€” reliable, 128K
      'openai/gpt-5-mini',           // $0.25/$2.00 â€” better reasoning, 400K
      'deepseek/deepseek-v3.2-exp',  // $0.21/$0.32 â€” powerful & cheap
    ],
    avgCostPer1M: 0.25,
    use: ['video prompts', 'image prompts', 'music prompts', 'voice config', 'quality scoring']
  },

  // TIER 2: Standard (creative tasks)
  tier2: {
    models: [
      'deepseek/deepseek-v3.2',      // $0.27/$0.40 â€” GPT-5 class performance!
      'google/gemini-2.5-flash-preview-09-2025',  // $0.30/$2.50 â€” 1M context
      'anthropic/claude-3.5-haiku',  // $0.80/$4.00 â€” good for creative
    ],
    avgCostPer1M: 0.50,
    use: ['script drafts', 'prompt refinement', 'research synthesis']
  },

  // TIER 3: Premium (complex creative, final outputs)
  tier3: {
    models: [
      'openai/gpt-5',                // $1.25/$10.00 â€” frontier
      'openai/gpt-5.1',              // $1.25/$10.00 â€” latest frontier
      'google/gemini-3-pro-preview', // $2.00/$12.00 â€” 1M context, multimodal
    ],
    avgCostPer1M: 2.00,
    use: ['final script writing', 'complex creative', 'quality review']
  },

  // TIER 4: Ultra-Premium (only for critical tasks)
  tier4: {
    models: [
      'anthropic/claude-opus-4.5',   // $5.00/$25.00 â€” best reasoning
      'openai/gpt-5-pro',            // $15.00/$120.00 â€” maximum quality
    ],
    avgCostPer1M: 10.00,
    use: ['complex research', 'final review for premium users', 'edge cases']
  },

  // SPECIAL: Web Search Models (built-in internet access)
  webSearch: {
    models: [
      'openai/gpt-4o-mini-search-preview',  // $0.15/$0.60 + search
      'openai/gpt-4o-search-preview',       // $2.50/$10.00 + search
    ],
    avgCostPer1M: 0.50,
    use: ['real-time research', 'fact verification', 'trending topics']
  }
};

function selectModel(task: AgentTask, budget: BudgetState): ModelConfig {
  // 1. ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ tier Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ñƒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
  const tier = TASK_TO_TIER[task.type];

  // 2. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ±ÑĞ´Ğ¶ĞµÑ‚
  if (budget.remaining < estimateCost(task, tier)) {
    // Downgrade to cheaper model
    return downgrade(tier);
  }

  // 3. Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³
  return MODEL_TIERS[tier];
}
```

### Caching Strategy

```typescript
// ĞšÑÑˆĞ¸Ñ€ÑƒĞµĞ¼ Ñ‡Ğ°ÑÑ‚Ñ‹Ğµ RAG Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
const ragCache = new LRUCache({
  max: 1000,
  ttl: 1000 * 60 * 60  // 1 Ñ‡Ğ°Ñ
});

// ĞšÑÑˆĞ¸Ñ€ÑƒĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ğ´Ğ»Ñ Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
const agentCache = new LRUCache({
  max: 500,
  ttl: 1000 * 60 * 30  // 30 Ğ¼Ğ¸Ğ½ÑƒÑ‚
});

async function getCachedOrCompute(key: string, compute: () => Promise<any>) {
  const cached = agentCache.get(key);
  if (cached) return cached;

  const result = await compute();
  agentCache.set(key, result);
  return result;
}
```

### Budget per Workflow

```typescript
interface WorkflowBudget {
  total: number;              // ĞĞ±Ñ‰Ğ¸Ğ¹ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚ ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ¾Ğ²
  spent: number;              // ĞŸĞ¾Ñ‚Ñ€Ğ°Ñ‡ĞµĞ½Ğ¾
  reserved: {                 // Ğ—Ğ°Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ´Ğ»Ñ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²
    [agentId: string]: number;
  };

  // ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ»Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°?
  canAfford(agent: string, estimated: number): boolean;

  // Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ€Ğ°ÑÑ…Ğ¾Ğ´
  record(agent: string, actual: number): void;

  // ĞÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ·ĞµÑ€Ğ² ĞµÑĞ»Ğ¸ Ğ°Ğ³ĞµĞ½Ñ‚ Ğ½Ğµ Ğ½ÑƒĞ¶ĞµĞ½
  release(agent: string): void;
}

// Ğ¢Ğ¸Ğ¿Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ±ÑĞ´Ğ¶ĞµÑ‚ Ğ´Ğ»Ñ 60s Ğ²Ğ¸Ğ´ĞµĞ¾
const BUDGET_TEMPLATES = {
  'basic': {
    total: 50,  // ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ¾Ğ²
    allocation: {
      orchestrator: 5,
      script: 15,
      videoPrompts: 15,
      voice: 5,
      music: 5,
      quality: 5
    }
  },
  'premium': {
    total: 100,
    allocation: {
      orchestrator: 10,
      research: 15,
      script: 25,
      videoPrompts: 25,
      voice: 10,
      music: 10,
      quality: 5
    }
  }
};
```

---

## RAG Implementation

### Vector Database Setup

```typescript
// src/lib/rag/index.ts

import { Chroma } from 'chromadb';

const chroma = new Chroma({
  path: process.env.CHROMA_URL
});

// ĞšĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ğ¸
const collections = {
  hooks: await chroma.getOrCreateCollection({ name: 'hooks' }),
  scripts: await chroma.getOrCreateCollection({ name: 'scripts' }),
  cinematography: await chroma.getOrCreateCollection({ name: 'cinematography' }),
  sora_prompts: await chroma.getOrCreateCollection({ name: 'sora_prompts' }),
  genre_rules: await chroma.getOrCreateCollection({ name: 'genre_rules' }),
  visual_styles: await chroma.getOrCreateCollection({ name: 'visual_styles' }),
  music_moods: await chroma.getOrCreateCollection({ name: 'music_moods' }),
  voice_profiles: await chroma.getOrCreateCollection({ name: 'voice_profiles' })
};

// Hybrid retrieval
async function hybridSearch(
  collection: string,
  query: string,
  filters?: Record<string, any>,
  limit: number = 5
): Promise<Document[]> {
  // 1. Dense retrieval (semantic)
  const denseResults = await collections[collection].query({
    queryTexts: [query],
    nResults: limit * 2,
    where: filters
  });

  // 2. Sparse retrieval (keyword) - Ğ´Ğ»Ñ Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ¾Ğ²
  const sparseResults = await bm25Search(collection, query, limit * 2);

  // 3. Reciprocal Rank Fusion
  const fused = reciprocalRankFusion(denseResults, sparseResults);

  return fused.slice(0, limit);
}
```

### Knowledge Base Population

```typescript
// src/lib/rag/populate.ts

// Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°
interface KnowledgeDocument {
  id: string;
  content: string;
  metadata: {
    genre?: string;
    type?: string;
    source?: string;
    quality?: number;         // 0-100, Ğ´Ğ»Ñ Ñ€Ğ°Ğ½Ğ¶Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
    platform?: string;
    model?: string;           // Ğ”Ğ»Ñ AI prompts
  };
}

// Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ² Ğ±Ğ°Ğ·Ñƒ
async function addToKnowledgeBase(
  collection: string,
  documents: KnowledgeDocument[]
): Promise<void> {
  await collections[collection].add({
    ids: documents.map(d => d.id),
    documents: documents.map(d => d.content),
    metadatas: documents.map(d => d.metadata)
  });
}

// ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
const INITIAL_DATA = {
  hooks: [
    {
      id: 'hook_001',
      content: 'What if I told you that [shocking fact]...',
      metadata: { genre: 'facts', type: 'curiosity_gap', quality: 95 }
    },
    {
      id: 'hook_002',
      content: 'POV: You just discovered [unexpected thing]',
      metadata: { genre: 'pov', type: 'immersive', quality: 90 }
    },
    // ... 500+ hooks
  ],
  cinematography: [
    {
      id: 'cam_001',
      content: 'For True Crime: Use slow push-ins during reveals. Low-key lighting with single source. Desaturated color grade. Minimal camera movement during tension.',
      metadata: { genre: 'true-crime', type: 'camera', source: 'film_school' }
    },
    // ... camera, lighting, motion rules
  ],
  sora_prompts: [
    {
      id: 'sora_001',
      content: 'A lone figure walks through an abandoned warehouse at dusk. Camera: slow tracking shot from behind, 35mm lens. Lighting: shafts of golden light through broken windows, dust particles visible. Motion: deliberate, measured pace. Color: muted browns and blues with warm highlights.',
      metadata: { genre: 'true-crime', model: 'sora', quality: 92 }
    },
    // ... 200+ working prompts
  ]
};
```

---

## Workflow Execution Example

### Full Flow: "True Crime Ğ¿Ñ€Ğ¾ Ğ¸ÑÑ‡ĞµĞ·Ğ½Ğ¾Ğ²ĞµĞ½Ğ¸Ğµ"

```
INPUT: "Ğ¥Ğ¾Ñ‡Ñƒ True Crime Ğ¿Ñ€Ğ¾ Ğ¸ÑÑ‡ĞµĞ·Ğ½Ğ¾Ğ²ĞµĞ½Ğ¸Ğµ CEO"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 1: ORCHESTRATOR â€” Parse Intent                                        â”‚
â”‚ Model: gpt-4o-mini | Tokens: ~200 | Cost: 0.003Â¢                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Output:                                                                     â”‚
â”‚ {                                                                           â”‚
â”‚   genre: "true-crime",                                                      â”‚
â”‚   topic: "CEO disappearance",                                               â”‚
â”‚   duration: 60,                                                             â”‚
â”‚   needsResearch: true,                                                      â”‚
â”‚   tone: "suspenseful",                                                      â”‚
â”‚   segments: 6                                                               â”‚
â”‚ }                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 2: ORCHESTRATOR â€” Build Context (RAG)                                 â”‚
â”‚ Queries: 4 | Retrieved: 15 docs | Cost: 0 (retrieval)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Retrieved:                                                                  â”‚
â”‚ - 5 true-crime hooks                                                        â”‚
â”‚ - Structure: "Hook â†’ Context â†’ Investigation â†’ Twist â†’ Reveal â†’ CTA"       â”‚
â”‚ - 3 example scripts                                                         â”‚
â”‚ - Cinematography rules for dark/suspense                                    â”‚
â”‚ - 3 working Sora prompts for crime genre                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 3: RESEARCH AGENT (parallel)                                          â”‚
â”‚ Model: gpt-4o-mini + Tavily | Tokens: ~1000 | Cost: 0.5Â¢                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Output:                                                                     â”‚
â”‚ - 5 real CEO disappearance cases                                            â”‚
â”‚ - Key facts: dates, companies, outcomes                                     â”‚
â”‚ - Trending angles: crypto fraud, escape theory                              â”‚
â”‚ - Warning: avoid defamation of living persons                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 4: SCRIPT AGENT                                                        â”‚
â”‚ Model: claude-3.5-sonnet | Tokens: ~2000 | Cost: 1.5Â¢                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Output:                                                                     â”‚
â”‚ {                                                                           â”‚
â”‚   hook: { text: "In 2019, a billionaire vanished...", duration: 3 },       â”‚
â”‚   segments: [                                                               â”‚
â”‚     { id: 1, text: "...", beat: "context", emotion: "curious" },           â”‚
â”‚     { id: 2, text: "...", beat: "investigation", emotion: "tense" },       â”‚
â”‚     { id: 3, text: "...", beat: "clue", emotion: "suspicious" },           â”‚
â”‚     { id: 4, text: "...", beat: "twist", emotion: "shocked" },             â”‚
â”‚     { id: 5, text: "...", beat: "reveal", emotion: "dark" },               â”‚
â”‚     { id: 6, text: "...", beat: "cta", emotion: "engaged" }                â”‚
â”‚   ],                                                                        â”‚
â”‚   cta: { text: "Follow for part 2", type: "follow" }                       â”‚
â”‚ }                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 5: VIDEO PROMPT AGENT (for each segment, parallel)                    â”‚
â”‚ Model: claude-3.5-haiku | Tokens: ~800 Ã— 6 | Cost: 0.8Â¢                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Output per segment:                                                         â”‚
â”‚ {                                                                           â”‚
â”‚   prompt: "Empty CEO office at night. Camera: slow dolly through doorway,  â”‚
â”‚            35mm lens, shallow DOF. Lighting: single desk lamp creating      â”‚
â”‚            long shadows. Papers scattered, chair pushed back as if left     â”‚
â”‚            in haste. Color: cold blue with warm lamp highlights.",          â”‚
â”‚   specs: { aspect: "9:16", duration: 10, camera: "slow dolly" },           â”‚
â”‚   model: "sora",                                                            â”‚
â”‚   fallback: "Empty office desk lamp shadows night",                         â”‚
â”‚   pexelsFallback: "empty office night shadows desk"                         â”‚
â”‚ }                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 6: VOICE AGENT + MUSIC AGENT (parallel)                               â”‚
â”‚ Models: gpt-4o-mini Ã— 2 | Tokens: ~600 | Cost: 0.2Â¢                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Voice Output:                                                               â”‚
â”‚ {                                                                           â”‚
â”‚   voiceId: "pNInz6obpgDQGcFmaJgB",  // "Adam" - deep, serious              â”‚
â”‚   settings: { stability: 0.7, similarityBoost: 0.8 },                       â”‚
â”‚   segmentSettings: [                                                        â”‚
â”‚     { id: 1, speed: 1.0, pitch: "normal" },                                â”‚
â”‚     { id: 4, speed: 0.9, pitch: "low" },  // Twist - slower                â”‚
â”‚   ]                                                                         â”‚
â”‚ }                                                                           â”‚
â”‚                                                                             â”‚
â”‚ Music Output:                                                               â”‚
â”‚ {                                                                           â”‚
â”‚   prompt: "dark ambient tension building cinematic suspense orchestral",    â”‚
â”‚   tags: ["instrumental", "dark", "ambient", "cinematic"],                   â”‚
â”‚   bpm: 70,                                                                  â”‚
â”‚   duckingPoints: [3, 28, 45]  // ĞŸÑ€Ğ¸Ğ³Ğ»ÑƒÑˆĞ¸Ñ‚ÑŒ Ğ²Ğ¾ Ğ²Ñ€ĞµĞ¼Ñ Ñ€ĞµÑ‡Ğ¸                  â”‚
â”‚ }                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STEP 7: QUALITY GATE                                                        â”‚
â”‚ Model: gpt-4o-mini | Tokens: ~500 | Cost: 0.1Â¢                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Checks:                                                                     â”‚
â”‚ âœ… Hook strength: 87/100                                                    â”‚
â”‚ âœ… Pacing: appropriate for genre                                            â”‚
â”‚ âœ… Video prompts: all have required elements                                â”‚
â”‚ âœ… Consistency: visual style matches across segments                        â”‚
â”‚ âš ï¸  Segment 3 video prompt lacks motion detail â†’ fix                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Action: Re-run VIDEO PROMPT AGENT for segment 3 only                        â”‚
â”‚ Additional cost: 0.15Â¢                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TOTAL COST: ~3.5Â¢ (~3.5 ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ¾Ğ² Ğ½Ğ° AI Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²)                            â”‚
â”‚                                                                             â”‚
â”‚ + Video generation: 6 Ã— 30 = 180 ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ¾Ğ² (Kling)                          â”‚
â”‚ + Voice: 36 ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ¾Ğ² (ElevenLabs)                                          â”‚
â”‚ + Music: 20 ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ¾Ğ² (Suno)                                                â”‚
â”‚ + Render: 10 ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ¾Ğ² (FantaProjekt)                                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚ Ğ˜Ğ¢ĞĞ“Ğ: ~250 ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ¾Ğ² ($2.50)                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ´Ğ»Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

### Core Agents

```
src/lib/agents/
â”œâ”€â”€ orchestrator/
â”‚   â”œâ”€â”€ index.ts              # Main orchestrator class
â”‚   â”œâ”€â”€ intent-parser.ts      # Parse user input
â”‚   â”œâ”€â”€ budget-manager.ts     # Cost control
â”‚   â”œâ”€â”€ context-builder.ts    # RAG integration
â”‚   â”œâ”€â”€ router.ts             # Agent/model selection
â”‚   â”œâ”€â”€ planner.ts            # Workflow planning
â”‚   â””â”€â”€ quality-gate.ts       # Quality checks
â”‚
â”œâ”€â”€ script/
â”‚   â”œâ”€â”€ index.ts              # Script agent
â”‚   â””â”€â”€ prompts.ts            # Prompt templates
â”‚
â”œâ”€â”€ video-prompt/
â”‚   â”œâ”€â”€ index.ts              # Video prompt agent
â”‚   â””â”€â”€ prompts.ts            # Cinematography prompts
â”‚
â”œâ”€â”€ image-prompt/
â”‚   â”œâ”€â”€ index.ts              # Image prompt agent
â”‚   â””â”€â”€ prompts.ts            # Style prompts
â”‚
â”œâ”€â”€ music/
â”‚   â”œâ”€â”€ index.ts              # Music agent
â”‚   â””â”€â”€ prompts.ts            # Suno prompts
â”‚
â”œâ”€â”€ voice/
â”‚   â”œâ”€â”€ index.ts              # Voice agent
â”‚   â””â”€â”€ profiles.ts           # Voice configurations
â”‚
â”œâ”€â”€ research/
â”‚   â”œâ”€â”€ index.ts              # Research agent
â”‚   â””â”€â”€ tavily.ts             # Web search integration
â”‚
â””â”€â”€ common/
    â”œâ”€â”€ types.ts              # Shared types
    â”œâ”€â”€ model-router.ts       # Model selection logic
    â””â”€â”€ cache.ts              # Caching utilities
```

### RAG System

```
src/lib/rag/
â”œâ”€â”€ index.ts                  # Main RAG interface
â”œâ”€â”€ chroma.ts                 # Vector DB client
â”œâ”€â”€ hybrid-search.ts          # Dense + Sparse retrieval
â”œâ”€â”€ collections/
â”‚   â”œâ”€â”€ hooks.ts              # Hooks collection
â”‚   â”œâ”€â”€ scripts.ts            # Scripts collection
â”‚   â”œâ”€â”€ cinematography.ts     # Camera/lighting rules
â”‚   â”œâ”€â”€ prompts.ts            # AI generation prompts
â”‚   â”œâ”€â”€ genres.ts             # Genre rules
â”‚   â””â”€â”€ styles.ts             # Visual styles
â”‚
â”œâ”€â”€ populate/
â”‚   â”œâ”€â”€ index.ts              # Population scripts
â”‚   â”œâ”€â”€ sources/              # Raw data files
â”‚   â”‚   â”œâ”€â”€ hooks.json
â”‚   â”‚   â”œâ”€â”€ scripts.json
â”‚   â”‚   â”œâ”€â”€ sora-prompts.json
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ embeddings.ts         # Embedding generation
â”‚
â””â”€â”€ query/
    â”œâ”€â”€ index.ts              # Query interface
    â””â”€â”€ filters.ts            # Metadata filtering
```

### Prompt Templates

```
src/lib/agents/prompts/
â”œâ”€â”€ template-engine.ts        # Dynamic prompt builder
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ script/
â”‚   â”‚   â”œâ”€â”€ default.ts
â”‚   â”‚   â”œâ”€â”€ true-crime.ts
â”‚   â”‚   â”œâ”€â”€ facts.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ video-prompt/
â”‚   â”‚   â”œâ”€â”€ default.ts
â”‚   â”‚   â”œâ”€â”€ cinematic-dark.ts
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ ...
â””â”€â”€ variables.ts              # Variable injection
```

### API Routes

```
src/app/api/agents/
â”œâ”€â”€ orchestrate/route.ts      # Main entry point
â”œâ”€â”€ stream/route.ts           # SSE streaming progress
â”œâ”€â”€ research/route.ts         # Research agent endpoint
â””â”€â”€ templates/route.ts        # Custom template CRUD
```

### Stores

```
src/stores/
â”œâ”€â”€ agent-store.ts            # Agent state, progress
â”œâ”€â”€ workflow-store.ts         # Current workflow
â””â”€â”€ rag-store.ts              # RAG query cache
```

### Components

```
src/components/agent/
â”œâ”€â”€ agent-chat.tsx            # Chat interface
â”œâ”€â”€ agent-message.tsx         # Message bubble
â”œâ”€â”€ plan-card.tsx             # Workflow plan display
â”œâ”€â”€ progress-tracker.tsx      # Step-by-step progress
â”œâ”€â”€ cost-estimate.tsx         # Budget display
â”œâ”€â”€ quality-score.tsx         # Quality metrics
â””â”€â”€ action-buttons.tsx        # User actions
```

---

## Tech Stack

| Component | Technology | Why |
|-----------|------------|-----|
| **Orchestration** | LangGraph | Graph-based, stateful, precise control |
| **Vector DB** | Chroma (dev) / Pinecone (prod) | Hybrid search, metadata filtering |
| **Embeddings** | OpenAI text-embedding-3-small | Cost-effective, good quality |
| **LLM Router** | OpenRouter | Access to all models, unified API |
| **Web Search** | Tavily API | Designed for AI agents |
| **Caching** | Redis + LRU | RAG cache, agent result cache |
| **Streaming** | Server-Sent Events | Real-time progress |

---

## Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸

- 01-auth (user context)
- 03-workflows (workflow creation)
- 06-api-integrations (OpenRouter config)

## ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

1. **RAG ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°** â€” Ğ±Ğ°Ğ·Ğ° Ğ²ÑĞµĞ³Ğ¾
2. **Orchestrator** â€” ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ
3. **Script Agent** â€” ĞºĞ»ÑÑ‡ĞµĞ²Ğ¾Ğ¹ Ğ°Ğ³ĞµĞ½Ñ‚
4. **Video Prompt Agent** â€” ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ²Ğ¸Ğ´ĞµĞ¾
5. **Quality Gate** â€” ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒ
6. **Research Agent** â€” Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾
7. **ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹**

---

## Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¸ Ğ¸ Ñ€ĞµÑ„ĞµÑ€ĞµĞ½ÑÑ‹

- [LangGraph vs CrewAI vs AutoGen](https://medium.com/@vikaskumarsingh_60821/battle-of-ai-agent-frameworks-langgraph-vs-autogen-vs-crewai-3c7bf5c18979)
- [RAG Best Practices 2025](https://www.edenai.co/post/the-2025-guide-to-retrieval-augmented-generation-rag)
- [Sora 2 Prompting Guide](https://cookbook.openai.com/examples/sora/sora2_prompting_guide)
- [Viral Storytelling Frameworks](https://www.socialmediagrowthguide.com/p/7-viral-storytelling-frameworks-that-make-social-media-content-irresistible)
- [n8n Video Production Pipeline](https://n8n.io/workflows/3442-fully-automated-ai-video-generation-and-multi-platform-publishing/)
